class V{withFields(K){let W=Object.keys(this).map((Z)=>(Z in K)?K[Z]:this[Z]);return new this.constructor(...W)}}class j{static fromArray(K,W){let Z=W||new M;for(let Q=K.length-1;Q>=0;--Q)Z=new P(K[Q],Z);return Z}[Symbol.iterator](){return new KK(this)}toArray(){return[...this]}atLeastLength(K){let W=this;while(K-- >0&&W)W=W.tail;return W!==void 0}hasLength(K){let W=this;while(K-- >0&&W)W=W.tail;return K===-1&&W instanceof M}countLength(){let K=this,W=0;while(K)K=K.tail,W++;return W-1}}function U(K,W){return new P(K,W)}function T(K,W){return j.fromArray(K,W)}class KK{#K;constructor(K){this.#K=K}next(){if(this.#K instanceof M)return{done:!0};else{let{head:K,tail:W}=this.#K;return this.#K=W,{value:K,done:!1}}}}class M extends j{}class P extends j{constructor(K,W){super();this.head=K,this.tail=W}}class w{bitSize;byteSize;bitOffset;rawBuffer;constructor(K,W,Z){if(!(K instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=W??K.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=Z??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(K.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=K}byteAt(K){if(K<0||K>=this.byteSize)return;return S(this.rawBuffer,this.bitOffset,K)}equals(K){if(this.bitSize!==K.bitSize)return!1;let W=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&K.bitOffset===0){for(let Q=0;Q<W;Q++)if(this.rawBuffer[Q]!==K.rawBuffer[Q])return!1;let Z=this.bitSize%8;if(Z){let Q=8-Z;if(this.rawBuffer[W]>>Q!==K.rawBuffer[W]>>Q)return!1}}else{for(let Q=0;Q<W;Q++){let X=S(this.rawBuffer,this.bitOffset,Q),J=S(K.rawBuffer,K.bitOffset,Q);if(X!==J)return!1}let Z=this.bitSize%8;if(Z){let Q=S(this.rawBuffer,this.bitOffset,W),X=S(K.rawBuffer,K.bitOffset,W),J=8-Z;if(Q>>J!==X>>J)return!1}}return!0}get buffer(){if(i("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(i("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function S(K,W,Z){if(W===0)return K[Z]??0;else{let Q=K[Z]<<W&255,X=K[Z+1]>>8-W;return Q|X}}class g{constructor(K){this.value=K}}var t={};function i(K,W){if(t[K])return;console.warn(`Deprecated BitArray.${K} property used in JavaScript FFI code. ${W}.`),t[K]=!0}class D extends V{static isResult(K){return K instanceof D}}class Y extends D{constructor(K){super();this[0]=K}isOk(){return!0}}var I=(K)=>new Y(K);class H extends D{constructor(K){super();this[0]=K}isOk(){return!1}}var q=(K)=>new H(K);function N(K,W){let Z=[K,W];while(Z.length){let Q=Z.pop(),X=Z.pop();if(Q===X)continue;if(!e(Q)||!e(X))return!1;if(!xK(Q,X)||AK(Q,X)||LK(Q,X)||zK(Q,X)||BK(Q,X)||wK(Q,X)||EK(Q,X))return!1;let F=Object.getPrototypeOf(Q);if(F!==null&&typeof F.equals==="function")try{if(Q.equals(X))continue;else return!1}catch{}let[G,r]=OK(Q),s=G(Q),DK=G(X);if(s.length!==DK.length)return!1;for(let o of s)Z.push(r(Q,o),r(X,o))}return!0}function OK(K){if(K instanceof Map)return[(W)=>W.keys(),(W,Z)=>W.get(Z)];else{let W=K instanceof globalThis.Error?["message"]:[];return[(Z)=>[...W,...Object.keys(Z)],(Z,Q)=>Z[Q]]}}function AK(K,W){return K instanceof Date&&(K>W||K<W)}function LK(K,W){return!(K instanceof w)&&K.buffer instanceof ArrayBuffer&&K.BYTES_PER_ELEMENT&&!(K.byteLength===W.byteLength&&K.every((Z,Q)=>Z===W[Q]))}function zK(K,W){return Array.isArray(K)&&K.length!==W.length}function BK(K,W){return K instanceof Map&&K.size!==W.size}function wK(K,W){return K instanceof Set&&(K.size!=W.size||[...K].some((Z)=>!W.has(Z)))}function EK(K,W){return K instanceof RegExp&&(K.source!==W.source||K.flags!==W.flags)}function e(K){return typeof K==="object"&&K!==null}function xK(K,W){if(typeof K!=="object"&&typeof W!=="object"&&(!K||!W))return!1;if([Promise,WeakSet,WeakMap,Function].some((Q)=>K instanceof Q))return!1;return K.constructor===W.constructor}function WK(K,W,Z){return K.reduceRight(Z,W)}function _(K){return WK(K,T([]),(W,Z)=>{return U(Z,W)})}class x{constructor(K,W){this.size=K,this.root=W}}var kK=5,OW=(1<<kK)-1,AW=Symbol(),LW=Symbol();function k(K,W,Z){let Q=[K.root];while(Q.length){let X=Q.pop(),J=X.data,F=J.length-hK(X.nodemap);for(let G=0;G<F;G+=2)W=Z(W,J[G],J[G+1]);for(let G=F;G<J.length;++G)Q.push(J[G])}return W}function hK(K){return K-=K>>>1&1431655765,K=(K&858993459)+(K>>>2&858993459),Math.imul(K+(K>>>4)&252645135,16843009)>>>24}var sK=void 0;var UK=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),HQ=new RegExp(`^[${UK}]*`),MQ=new RegExp(`[${UK}]*$`);function oK(K){return decodeURIComponent(K||"")}function p(K){try{return new Y(oK(K))}catch{return new H(sK)}}function NK(K){let W=K.toString().replace("+","");if(W.indexOf(".")>=0)return W;else{let Z=W.indexOf("e");if(Z>=0)return W.slice(0,Z)+".0"+W.slice(Z);else return W+".0"}}class tK{#K=new Set;inspect(K){let W=typeof K;if(K===!0)return"True";if(K===!1)return"False";if(K===null)return"//js(null)";if(K===void 0)return"Nil";if(W==="string")return this.#Y(K);if(W==="bigint"||Number.isInteger(K))return K.toString();if(W==="number")return NK(K);if(K instanceof g)return this.#J(K);if(K instanceof w)return this.#H(K);if(K instanceof RegExp)return`//js(${K})`;if(K instanceof Date)return`//js(Date("${K.toISOString()}"))`;if(K instanceof globalThis.Error)return`//js(${K.toString()})`;if(K instanceof Function){let Q=[];for(let X of Array(K.length).keys())Q.push(String.fromCharCode(X+97));return`//fn(${Q.join(", ")}) { ... }`}if(this.#K.size===this.#K.add(K).size)return"//js(circular reference)";let Z;if(Array.isArray(K))Z=`#(${K.map((Q)=>this.inspect(Q)).join(", ")})`;else if(K instanceof j)Z=this.#X(K);else if(K instanceof V)Z=this.#Q(K);else if(K instanceof x)Z=this.#Z(K);else if(K instanceof Set)return`//js(Set(${[...K].map((Q)=>this.inspect(Q)).join(", ")}))`;else Z=this.#W(K);return this.#K.delete(K),Z}#W(K){let W=Object.getPrototypeOf(K)?.constructor?.name||"Object",Z=[];for(let J of Object.keys(K))Z.push(`${this.inspect(J)}: ${this.inspect(K[J])}`);let Q=Z.length?" "+Z.join(", ")+" ":"";return`//js(${W==="Object"?"":W+" "}{${Q}})`}#Z(K){let W="dict.from_list([",Z=!0;return W=k(K,W,(Q,X,J)=>{if(!Z)Q=Q+", ";return Z=!1,Q+"#("+this.inspect(X)+", "+this.inspect(J)+")"}),W+"])"}#Q(K){let W=Object.keys(K).map((Z)=>{let Q=this.inspect(K[Z]);return isNaN(parseInt(Z))?`${Z}: ${Q}`:Q}).join(", ");return W?`${K.constructor.name}(${W})`:K.constructor.name}#X(K){if(K instanceof M)return"[]";let W='charlist.from_string("',Z="[",Q=K;while(Q instanceof P){let X=Q.head;if(Q=Q.tail,Z!=="[")Z+=", ";if(Z+=this.inspect(X),W)if(Number.isInteger(X)&&X>=32&&X<=126)W+=String.fromCharCode(X);else W=null}if(W)return W+'")';else return Z+"]"}#Y(K){let W='"';for(let Z=0;Z<K.length;Z++){let Q=K[Z];switch(Q){case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"\t":W+="\\t";break;case"\f":W+="\\f";break;case"\\":W+="\\\\";break;case'"':W+="\\\"";break;default:if(Q<" "||Q>"~"&&Q<" ")W+="\\u{"+Q.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else W+=Q}}return W+='"',W}#J(K){return`//utfcodepoint(${String.fromCodePoint(K.value)})`}#H(K){if(K.bitSize===0)return"<<>>";let W="<<";for(let Z=0;Z<K.byteSize-1;Z++)W+=K.byteAt(Z).toString(),W+=", ";if(K.byteSize*8===K.bitSize)W+=K.byteAt(K.byteSize-1).toString();else{let Z=K.bitSize%8;W+=K.byteAt(K.byteSize-1)>>8-Z,W+=`:size(${Z})`}return W+=">>",W}}function jK(K,W){while(!0){let Z=K,Q=W;if(Z instanceof M)return new H(void 0);else{let{head:X,tail:J}=Z;if(Q(X))return new Y(X);else K=J,W=Q}}}function B(K,W){if(K instanceof Y){let Z=K[0];return W(Z)}else return K}function n(K,W){if(K instanceof Y)return K[0];else return W}function l(K){return Array.from(document.querySelectorAll(K))}function a(K,W){let Z=K.getAttribute(W);if(Z)return I(Z);return q()}function m(K,W){if(W in K.dataset)return I(K.dataset[W]);return q(void 0)}async function SK(K,W){let Z=Intl.DateTimeFormat().resolvedOptions().timeZone,Q=Intl.DateTimeFormat().resolvedOptions().locale,X={time_zone:Z,locale:Q},J=`/${K}/user_client_info`;return fetch(J,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(X)}).then((F)=>JW(W)).catch((F)=>console.error("`put_user_client_info` failed:",F))}function JW(K){window.location.replace(K)}function HW(){let K=B((()=>{let W=l("meta"),Z=_(W);return jK(Z,(Q)=>{let X;return X=a(Q,"name"),N(X,new Y("no-user-client-info"))})})(),(W)=>{return B(m(W,"path_prefix"),(Z)=>{let Q,J=m(W,"redirect_to_path"),F=B(J,p);return Q=n(F,"/"),new Y(SK(Z,Q))})});return n(K,void 0)}function PK(){return HW()}PK();
